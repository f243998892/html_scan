# äººè„¸è¯†åˆ«ç™»å½•æµ‹è¯•æŒ‡å—

## âœ… éƒ¨ç½²å®Œæˆæ—¶é—´
2025-11-16 12:02

---

## ğŸ“‹ æµ‹è¯•å‰æ£€æŸ¥

### 1. åç«¯æœåŠ¡çŠ¶æ€

```bash
# æ£€æŸ¥APIæœåŠ¡æ˜¯å¦è¿è¡Œ
systemctl status product_api_dev

# åº”è¯¥æ˜¾ç¤ºï¼šActive: active (running)
```

### 2. å‰ç«¯æ–‡ä»¶æ£€æŸ¥

```bash
# æ£€æŸ¥face-api.jsåº“
ls -lh /var/www/product_system_dev/js/libs/face-api.min.js
# åº”è¯¥æ˜¾ç¤ºï¼š649K

# æ£€æŸ¥æ¨¡å‹æ–‡ä»¶
ls -lh /var/www/product_system_dev/models/
# åº”è¯¥æœ‰7ä¸ªæ–‡ä»¶ï¼Œæ€»è®¡6.8M
```

### 3. nginxé…ç½®æ£€æŸ¥

```bash
# æµ‹è¯•nginxé…ç½®
sudo nginx -t

# é‡æ–°åŠ è½½nginx
sudo systemctl reload nginx
```

### 4. æ¨¡å‹æ–‡ä»¶è®¿é—®æµ‹è¯•

```bash
# æµ‹è¯•æ¨¡å‹æ–‡ä»¶æ˜¯å¦å¯è®¿é—®
curl -I https://192.168.0.215:8443/models/tiny_face_detector_model-weights_manifest.json -k

# åº”è¯¥è¿”å›ï¼š
# HTTP/1.1 200 OK
# Cache-Control: public, max-age=31536000, immutable
```

---

## ğŸ§ª åŠŸèƒ½æµ‹è¯•æµç¨‹

### æµ‹è¯•1ï¼šæ–°ç”¨æˆ·æ³¨å†Œ

#### æ­¥éª¤ï¼š

1. **æ‰“å¼€ç½‘ç«™**
   - å†…ç½‘è®¿é—®ï¼š`https://192.168.0.215:8443`
   - å…¬ç½‘è®¿é—®ï¼š`https://www.saby.uno:444`

2. **ç­‰å¾…æ¨¡å‹åŠ è½½**
   - é¦–æ¬¡è®¿é—®ä¼šçœ‹åˆ°"æ­£åœ¨åŠ è½½äººè„¸è¯†åˆ«æ¨¡å‹..."
   - å¤§çº¦2-3ç§’ååŠ è½½å®Œæˆï¼ˆæµè§ˆå™¨ç¼“å­˜å<100msï¼‰

3. **åˆ‡æ¢åˆ°"æ–°ç”¨æˆ·æ³¨å†Œ"æ ‡ç­¾é¡µ**
   - ç‚¹å‡»"æ–°ç”¨æˆ·æ³¨å†Œ"æ ‡ç­¾

4. **è¾“å…¥å§“å**
   - åœ¨å§“åè¾“å…¥æ¡†ä¸­è¾“å…¥æµ‹è¯•å§“åï¼Œä¾‹å¦‚ï¼š"å¼ ä¸‰"
   - è¦æ±‚ï¼š2-10ä¸ªå­—ç¬¦

5. **ç‚¹å‡»"å¼€å§‹äººè„¸æ³¨å†Œ"æŒ‰é’®**
   - æµè§ˆå™¨ä¼šè¯·æ±‚æ‘„åƒå¤´æƒé™ï¼Œç‚¹å‡»"å…è®¸"

6. **äººè„¸è¯†åˆ«**
   - æ‘„åƒå¤´å¯åŠ¨åï¼Œæ­£è§†é•œå¤´
   - ä¿æŒé¢éƒ¨æ¸…æ™°ï¼Œå…‰çº¿å……è¶³
   - ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹äººè„¸ï¼ˆçº¦1ç§’ï¼‰

7. **æ³¨å†ŒæˆåŠŸ**
   - æ˜¾ç¤ºï¼š"æ³¨å†ŒæˆåŠŸï¼æ¬¢è¿ï¼Œå¼ ä¸‰"
   - 1ç§’åè‡ªåŠ¨è·³è½¬åˆ°ä¸»é¡µ

#### é¢„æœŸç»“æœï¼š
- âœ… ç”¨æˆ·æ³¨å†ŒæˆåŠŸ
- âœ… å§“åä¿å­˜åˆ°æ•°æ®åº“
- âœ… äººè„¸ç‰¹å¾ä¿å­˜åˆ°æ•°æ®åº“
- âœ… localStorageä¿å­˜äº†å§“å
- âœ… è‡ªåŠ¨ç™»å½•åˆ°ä¸»é¡µ

#### æµ‹è¯•ç”¨ä¾‹ï¼š

| æµ‹è¯•åœºæ™¯ | æ“ä½œ | é¢„æœŸç»“æœ |
|---------|------|---------|
| æ­£å¸¸æ³¨å†Œ | è¾“å…¥"å¼ ä¸‰"ï¼Œæ£€æµ‹äººè„¸ | âœ… æ³¨å†ŒæˆåŠŸ |
| å§“åå¤ªçŸ­ | è¾“å…¥"æ" | âŒ æç¤º"è¯·è¾“å…¥2-10ä¸ªå­—ç¬¦çš„å§“å" |
| é‡å¤å§“å | å†æ¬¡è¾“å…¥"å¼ ä¸‰" | âŒ æç¤º"è¯¥å§“åå·²è¢«æ³¨å†Œ" |
| æœªæ£€æµ‹åˆ°äººè„¸ | é®æŒ¡é¢éƒ¨ | âŒ æç¤º"æœªæ£€æµ‹åˆ°äººè„¸ï¼Œè¯·é‡è¯•" |

---

### æµ‹è¯•2ï¼šäººè„¸ç™»å½•

#### æ­¥éª¤ï¼š

1. **æ¸…é™¤localStorageï¼ˆæ¨¡æ‹Ÿé‡æ–°è®¿é—®ï¼‰**
   ```javascript
   // åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œ
   localStorage.removeItem('user_full_name');
   location.reload();
   ```

2. **è¿”å›ç™»å½•é¡µé¢**
   - åˆ·æ–°é¡µé¢ï¼Œåº”è¯¥æ˜¾ç¤ºç™»å½•ç•Œé¢

3. **é»˜è®¤åœ¨"äººè„¸ç™»å½•"æ ‡ç­¾é¡µ**

4. **ç‚¹å‡»"å¼€å§‹äººè„¸è¯†åˆ«ç™»å½•"æŒ‰é’®**
   - æµè§ˆå™¨è¯·æ±‚æ‘„åƒå¤´æƒé™ï¼ˆå¦‚æœä¹‹å‰å…è®¸è¿‡åˆ™ç›´æ¥å¯åŠ¨ï¼‰

5. **äººè„¸è¯†åˆ«**
   - æ­£è§†é•œå¤´
   - ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹å¹¶åŒ¹é…äººè„¸

6. **ç™»å½•æˆåŠŸ**
   - æ˜¾ç¤ºï¼š"ç™»å½•æˆåŠŸï¼æ¬¢è¿å›æ¥ï¼Œå¼ ä¸‰"
   - ç›¸ä¼¼åº¦åº”è¯¥æ¥è¿‘1.0ï¼ˆ100%ï¼‰
   - 1ç§’åè‡ªåŠ¨è·³è½¬åˆ°ä¸»é¡µ

#### é¢„æœŸç»“æœï¼š
- âœ… è¯†åˆ«åˆ°æ³¨å†Œçš„ç”¨æˆ·
- âœ… ç›¸ä¼¼åº¦>0.6ï¼ˆé€šå¸¸ä¼š>0.9ï¼‰
- âœ… è‡ªåŠ¨ç™»å½•åˆ°ä¸»é¡µ
- âœ… æ›´æ–°last_loginæ—¶é—´
- âœ… è®°å½•ç™»å½•å†å²

#### æµ‹è¯•ç”¨ä¾‹ï¼š

| æµ‹è¯•åœºæ™¯ | æ“ä½œ | é¢„æœŸç»“æœ |
|---------|------|---------|
| æ­£ç¡®äººè„¸ | æ³¨å†Œäººå‘˜æœ¬äºº | âœ… ç™»å½•æˆåŠŸï¼Œç›¸ä¼¼åº¦>0.9 |
| é”™è¯¯äººè„¸ | å…¶ä»–äºº | âŒ æç¤º"æœªè¯†åˆ«åˆ°æ³¨å†Œç”¨æˆ·" |
| ç…§ç‰‡å†’å…… | ç”¨ç…§ç‰‡å¯¹ç€æ‘„åƒå¤´ | âš ï¸ å¯èƒ½è¯†åˆ«ï¼ˆæ´»ä½“æ£€æµ‹æœªå¯ç”¨ï¼‰ |

---

### æµ‹è¯•3ï¼šè®°ä½ç™»å½•

#### æ­¥éª¤ï¼š

1. **ç™»å½•æˆåŠŸå**
   - æ³¨æ„ï¼šlocalStorageå·²ä¿å­˜ç”¨æˆ·å§“å

2. **å…³é—­å¹¶é‡æ–°æ‰“å¼€æµè§ˆå™¨**
   - æˆ–åˆ·æ–°é¡µé¢

3. **è‡ªåŠ¨ç™»å½•**
   - åº”è¯¥ç›´æ¥è¿›å…¥ä¸»é¡µ
   - æ— éœ€é‡æ–°è¿›è¡Œäººè„¸è¯†åˆ«

#### é¢„æœŸç»“æœï¼š
- âœ… è‡ªåŠ¨ç™»å½•åˆ°ä¸»é¡µ
- âœ… æ˜¾ç¤ºç”¨æˆ·å§“å
- âœ… å·¥åºé€‰æ‹©ä¿æŒä¹‹å‰çš„è®¾ç½®

---

### æµ‹è¯•4ï¼šå¤šç”¨æˆ·æµ‹è¯•

#### æ­¥éª¤ï¼š

1. **æ³¨å†Œç¬¬ä¸€ä¸ªç”¨æˆ·**
   - å§“åï¼š"å¼ ä¸‰"
   - äººè„¸ï¼šäººå‘˜A

2. **æ¸…é™¤localStorageï¼Œæ³¨å†Œç¬¬äºŒä¸ªç”¨æˆ·**
   ```javascript
   localStorage.removeItem('user_full_name');
   location.reload();
   ```
   - å§“åï¼š"æå››"
   - äººè„¸ï¼šäººå‘˜B

3. **æå››ç™»å½•æµ‹è¯•**
   - ç‚¹å‡»"äººè„¸ç™»å½•"
   - äººå‘˜Bå¯¹ç€æ‘„åƒå¤´
   - åº”è¯¥è¯†åˆ«ä¸º"æå››"

4. **å¼ ä¸‰ç™»å½•æµ‹è¯•**
   - æ¸…é™¤localStorage
   - ç‚¹å‡»"äººè„¸ç™»å½•"
   - äººå‘˜Aå¯¹ç€æ‘„åƒå¤´
   - åº”è¯¥è¯†åˆ«ä¸º"å¼ ä¸‰"

#### é¢„æœŸç»“æœï¼š
- âœ… æ¯ä¸ªäººåªèƒ½ç™»å½•è‡ªå·±çš„è´¦å·
- âœ… æ— æ³•ç”¨åˆ«äººçš„è„¸ç™»å½•è‡ªå·±çš„è´¦å·

---

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1ï¼šæ¨¡å‹åŠ è½½å¤±è´¥

**ç—‡çŠ¶**ï¼š
- æ§åˆ¶å°æ˜¾ç¤º"æ¨¡å‹åŠ è½½å¤±è´¥"
- æˆ–ä¸€ç›´æ˜¾ç¤º"æ­£åœ¨åŠ è½½äººè„¸è¯†åˆ«æ¨¡å‹..."

**æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# 1. æ£€æŸ¥æ¨¡å‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -lh /var/www/product_system_dev/models/

# 2. æ£€æŸ¥æ–‡ä»¶æƒé™
chmod 644 /var/www/product_system_dev/models/*

# 3. æ£€æŸ¥nginxé…ç½®
sudo nginx -t

# 4. æµ‹è¯•æ–‡ä»¶è®¿é—®
curl https://192.168.0.215:8443/models/tiny_face_detector_model-weights_manifest.json -k

# 5. æŸ¥çœ‹nginxé”™è¯¯æ—¥å¿—
tail -f /var/log/nginx/error.log
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿æ¨¡å‹æ–‡ä»¶å­˜åœ¨
- ç¡®ä¿nginxé…ç½®æ­£ç¡®
- é‡æ–°åŠ è½½nginxï¼š`sudo systemctl reload nginx`

---

### é—®é¢˜2ï¼šæ‘„åƒå¤´æ— æ³•å¯åŠ¨

**ç—‡çŠ¶**ï¼š
- ç‚¹å‡»"å¼€å§‹äººè„¸æ³¨å†Œ/ç™»å½•"åæ— ååº”
- æˆ–æç¤º"æ— æ³•è®¿é—®æ‘„åƒå¤´"

**æ’æŸ¥æ­¥éª¤**ï¼š
1. æ£€æŸ¥æµè§ˆå™¨æƒé™
   - ç¡®ä¿å…è®¸ç½‘ç«™è®¿é—®æ‘„åƒå¤´
   - Chrome: è®¾ç½® â†’ éšç§å’Œå®‰å…¨ â†’ ç½‘ç«™è®¾ç½® â†’ æ‘„åƒå¤´

2. æ£€æŸ¥HTTPS
   - æ‘„åƒå¤´è®¿é—®éœ€è¦HTTPS
   - ç¡®è®¤è®¿é—®çš„æ˜¯https://å¼€å¤´çš„åœ°å€

3. æ£€æŸ¥æ‘„åƒå¤´æ˜¯å¦è¢«å ç”¨
   - å…³é—­å…¶ä»–ä½¿ç”¨æ‘„åƒå¤´çš„åº”ç”¨

**è§£å†³æ–¹æ¡ˆ**ï¼š
- åˆ·æ–°é¡µé¢ï¼Œé‡æ–°æˆæƒæ‘„åƒå¤´
- ç¡®ä¿ä½¿ç”¨HTTPSè®¿é—®

---

### é—®é¢˜3ï¼šæœªæ£€æµ‹åˆ°äººè„¸

**ç—‡çŠ¶**ï¼š
- æ‘„åƒå¤´æ­£å¸¸ï¼Œä½†æç¤º"æœªæ£€æµ‹åˆ°äººè„¸"

**å¯èƒ½åŸå› **ï¼š
1. å…‰çº¿ä¸è¶³
2. é¢éƒ¨é®æŒ¡ï¼ˆå£ç½©ã€çœ¼é•œã€å¸½å­ï¼‰
3. è§’åº¦ä¸å¯¹ï¼ˆä¾§è„¸ã€ä½å¤´ï¼‰
4. è·ç¦»å¤ªè¿œ

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿å…‰çº¿å……è¶³
- æ‘˜ä¸‹å£ç½©å’Œå¸½å­
- æ­£è§†æ‘„åƒå¤´
- è°ƒæ•´è·ç¦»ï¼ˆ30-60cmï¼‰

---

### é—®é¢˜4ï¼šAPIè°ƒç”¨å¤±è´¥

**ç—‡çŠ¶**ï¼š
- æ§åˆ¶å°æ˜¾ç¤º"è°ƒç”¨æ³¨å†Œ/ç™»å½•APIå¤±è´¥"
- æˆ–"ç½‘ç»œé”™è¯¯"

**æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# 1. æ£€æŸ¥APIæœåŠ¡çŠ¶æ€
systemctl status product_api_dev

# 2. æ£€æŸ¥APIæ—¥å¿—
tail -f /home/user/product_api_dev/api.log

# 3. æ‰‹åŠ¨æµ‹è¯•API
curl http://127.0.0.1:8002/api/users/check/æµ‹è¯• | jq

# 4. æµ‹è¯•æ•°æ®åº“è¿æ¥
PGPASSWORD=yb123456 psql -h localhost -p 5432 -U fh -d scan_db -c "SELECT COUNT(*) FROM users;"
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿APIæœåŠ¡è¿è¡Œä¸­
- æ£€æŸ¥æ•°æ®åº“è¿æ¥
- é‡å¯APIæœåŠ¡ï¼š`sudo systemctl restart product_api_dev`

---

### é—®é¢˜5ï¼šæ³¨å†Œæ—¶æç¤º"äººè„¸ç›¸ä¼¼"

**ç—‡çŠ¶**ï¼š
- æ³¨å†Œæ—¶æç¤º"æ£€æµ‹åˆ°ä¸ç”¨æˆ·XXXäººè„¸ç›¸ä¼¼"

**åŸå› **ï¼š
- é˜²æ­¢ä¸€äººæ³¨å†Œå¤šä¸ªè´¦å·çš„å®‰å…¨æœºåˆ¶
- ç›¸ä¼¼åº¦é˜ˆå€¼ï¼š0.8

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å¦‚æœç¡®å®æ˜¯åŒä¸€ä¸ªäººï¼šè¿™æ˜¯æ­£å¸¸çš„å®‰å…¨æœºåˆ¶
- å¦‚æœæ˜¯ä¸åŒçš„äººï¼šå¯èƒ½æ˜¯åŒèƒèƒæˆ–ç›¸ä¼¼åº¦è®¡ç®—è¯¯åˆ¤
  - è§£å†³ï¼šä¿®æ”¹é˜ˆå€¼æˆ–æ·»åŠ æ›´å¤šç‰¹å¾è¯†åˆ«

---

## ğŸ“Š æµè§ˆå™¨æ§åˆ¶å°è°ƒè¯•

### æŸ¥çœ‹æ¨¡å‹åŠ è½½çŠ¶æ€

```javascript
// æ‰“å¼€æ§åˆ¶å°ï¼ˆF12ï¼‰

// æŸ¥çœ‹face-apiæ˜¯å¦åŠ è½½
console.log('face-api loaded:', typeof faceapi !== 'undefined');

// æŸ¥çœ‹æ¨¡å‹åŠ è½½çŠ¶æ€
console.log('Models loaded:', faceapi?.nets?.tinyFaceDetector?.isLoaded);

// æ‰‹åŠ¨åŠ è½½æ¨¡å‹ï¼ˆå¦‚æœå¤±è´¥ï¼‰
await faceapi.nets.tinyFaceDetector.loadFromUri('/models');
await faceapi.nets.faceLandmark68Net.loadFromUri('/models');
await faceapi.nets.faceRecognitionNet.loadFromUri('/models');
```

### æŸ¥çœ‹localStorage

```javascript
// æŸ¥çœ‹ä¿å­˜çš„ç”¨æˆ·å
console.log('Saved user:', localStorage.getItem('user_full_name'));

// æŸ¥çœ‹ä¿å­˜çš„å·¥åº
console.log('Saved process:', localStorage.getItem('selected_process'));

// æ¸…é™¤æ‰€æœ‰æ•°æ®
localStorage.clear();
```

### æ‰‹åŠ¨è°ƒç”¨API

```javascript
// æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨
fetch('/api/users/check/å¼ ä¸‰')
  .then(r => r.json())
  .then(console.log);

// æŸ¥çœ‹åç«¯å“åº”
fetch('/api/face/login', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    descriptor: new Array(128).fill(0)  // æµ‹è¯•æ•°æ®
  })
}).then(r => r.json()).then(console.log);
```

---

## ğŸ” æ•°æ®åº“æŸ¥è¯¢

### æŸ¥çœ‹æ³¨å†Œç”¨æˆ·

```bash
PGPASSWORD=yb123456 psql -h localhost -p 5432 -U fh -d scan_db -c "
SELECT id, full_name, registered_at, last_login
FROM users
ORDER BY registered_at DESC;
"
```

### æŸ¥çœ‹ç™»å½•å†å²

```bash
PGPASSWORD=yb123456 psql -h localhost -p 5432 -U fh -d scan_db -c "
SELECT u.full_name, lh.login_time, lh.ip_address
FROM login_history lh
JOIN users u ON u.id = lh.user_id
ORDER BY lh.login_time DESC
LIMIT 10;
"
```

### åˆ é™¤æµ‹è¯•ç”¨æˆ·

```bash
PGPASSWORD=yb123456 psql -h localhost -p 5432 -U fh -d scan_db -c "
DELETE FROM users WHERE full_name = 'å¼ ä¸‰';
"
```

---

## ğŸ¯ æ€§èƒ½æµ‹è¯•

### æ¨¡å‹åŠ è½½æ—¶é—´

| ç¯å¢ƒ | é¦–æ¬¡åŠ è½½ | ç¼“å­˜ååŠ è½½ |
|------|---------|----------|
| å†…ç½‘ | 2-3ç§’ | <100ms |
| å…¬ç½‘ | 3-5ç§’ | <100ms |

### äººè„¸è¯†åˆ«é€Ÿåº¦

| æ“ä½œ | è€—æ—¶ |
|------|------|
| å¯åŠ¨æ‘„åƒå¤´ | <1ç§’ |
| æ£€æµ‹äººè„¸ | <0.5ç§’ |
| æå–ç‰¹å¾ | <0.5ç§’ |
| APIè°ƒç”¨ | <0.2ç§’ |
| **æ€»è®¡** | **<2ç§’** |

---

## âœ… æµ‹è¯•å®Œæˆæ£€æŸ¥è¡¨

- [ ] åç«¯APIæœåŠ¡è¿è¡Œæ­£å¸¸
- [ ] nginxé…ç½®æ­£ç¡®å¹¶å·²é‡è½½
- [ ] æ¨¡å‹æ–‡ä»¶å¯ä»¥æ­£å¸¸è®¿é—®
- [ ] èƒ½å¤Ÿæ³¨å†Œæ–°ç”¨æˆ·
- [ ] èƒ½å¤Ÿä½¿ç”¨äººè„¸ç™»å½•
- [ ] è®°ä½ç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] å¤šç”¨æˆ·äº’ä¸å¹²æ‰°
- [ ] é‡å¤å§“åè¢«æ‹’ç»
- [ ] ç›¸ä¼¼äººè„¸è¢«æ£€æµ‹
- [ ] æ•°æ®åº“è®°å½•æ­£ç¡®

---

## ğŸ“ æµ‹è¯•å‘½ä»¤å¿«æ·æ–¹å¼

```bash
# å¿«é€Ÿæµ‹è¯•è„šæœ¬
cat > /tmp/test_face_recognition.sh << 'EOF'
#!/bin/bash

echo "========================================="
echo "äººè„¸è¯†åˆ«ç³»ç»Ÿå¿«é€Ÿæµ‹è¯•"
echo "========================================="

echo ""
echo "1. æ£€æŸ¥APIæœåŠ¡..."
systemctl is-active product_api_dev && echo "âœ… APIæœåŠ¡è¿è¡Œä¸­" || echo "âŒ APIæœåŠ¡æœªè¿è¡Œ"

echo ""
echo "2. æ£€æŸ¥æ¨¡å‹æ–‡ä»¶..."
[ -f "/var/www/product_system_dev/models/tiny_face_detector_model-shard1" ] && echo "âœ… æ¨¡å‹æ–‡ä»¶å­˜åœ¨" || echo "âŒ æ¨¡å‹æ–‡ä»¶ç¼ºå¤±"

echo ""
echo "3. æµ‹è¯•æ¨¡å‹æ–‡ä»¶è®¿é—®..."
HTTP_CODE=$(curl -s -o /dev/null -w "%{http_code}" -k https://192.168.0.215:8443/models/tiny_face_detector_model-weights_manifest.json)
[ "$HTTP_CODE" = "200" ] && echo "âœ… æ¨¡å‹æ–‡ä»¶å¯è®¿é—® (HTTP $HTTP_CODE)" || echo "âŒ æ¨¡å‹æ–‡ä»¶æ— æ³•è®¿é—® (HTTP $HTTP_CODE)"

echo ""
echo "4. æµ‹è¯•APIæ¥å£..."
HTTP_CODE=$(curl -s -o /dev/null -w "%{http_code}" http://127.0.0.1:8002/api/users/check/æµ‹è¯•)
[ "$HTTP_CODE" = "200" ] && echo "âœ… APIæ¥å£æ­£å¸¸ (HTTP $HTTP_CODE)" || echo "âŒ APIæ¥å£å¼‚å¸¸ (HTTP $HTTP_CODE)"

echo ""
echo "5. æŸ¥çœ‹æ³¨å†Œç”¨æˆ·æ•°é‡..."
USER_COUNT=$(PGPASSWORD=yb123456 psql -h localhost -p 5432 -U fh -d scan_db -t -c "SELECT COUNT(*) FROM users;" 2>/dev/null | tr -d ' ')
echo "   å½“å‰æ³¨å†Œç”¨æˆ·ï¼š$USER_COUNT äºº"

echo ""
echo "========================================="
echo "æµ‹è¯•å®Œæˆï¼"
echo "========================================="

EOF

chmod +x /tmp/test_face_recognition.sh
/tmp/test_face_recognition.sh
```

---

**å‡†å¤‡å°±ç»ªï¼ç°åœ¨å¯ä»¥å¼€å§‹æµ‹è¯•äººè„¸è¯†åˆ«ç™»å½•åŠŸèƒ½äº†ï¼** ğŸ‰
