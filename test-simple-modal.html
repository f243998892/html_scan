<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®€å•æ¨¡æ€æ¡†æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f8f9fa;
        }
        .test-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-btn {
            display: inline-block;
            padding: 15px 30px;
            margin: 10px;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.2s;
        }
        .test-btn:hover {
            background: #0056b3;
            transform: translateY(-1px);
        }
        .test-btn.success {
            background: #28a745;
        }
        .test-btn.success:hover {
            background: #1e7e34;
        }
        .status {
            margin: 20px 0;
            padding: 15px;
            border-radius: 5px;
            background: #e9ecef;
        }
        .console-output {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            font-family: monospace;
            font-size: 14px;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ“± ç®€å•æ¨¡æ€æ¡†æµ‹è¯•</h1>
        
        <div class="status">
            <h3>æµ‹è¯•çŠ¶æ€</h3>
            <p id="status-text">ç­‰å¾…æµ‹è¯•...</p>
        </div>
        
        <div style="text-align: center;">
            <button class="test-btn photo-checkin-btn">
                ğŸ“¸ æµ‹è¯•æ‹ç…§æ‰“å¡
            </button>
            
            <button class="test-btn photo-management-btn success">
                ğŸ“ æµ‹è¯•ç…§ç‰‡ç®¡ç†
            </button>
            
            <button class="test-btn" onclick="showConsoleOutput()">
                ğŸ“‹ æ˜¾ç¤ºæ§åˆ¶å°æ—¥å¿—
            </button>
            
            <button class="test-btn" onclick="clearConsole()">
                ğŸ—‘ï¸ æ¸…ç©ºæ—¥å¿—
            </button>
        </div>
        
        <div id="console-section" style="display: none;">
            <h4>æ§åˆ¶å°è¾“å‡º</h4>
            <div id="console-output" class="console-output"></div>
        </div>
        
        <div style="margin-top: 30px;">
            <h3>æµ‹è¯•è¯´æ˜</h3>
            <ul>
                <li><strong>æ‹ç…§æ‰“å¡</strong>ï¼šç‚¹å‡»åº”è¯¥å¼¹å‡ºæ‹ç…§ç•Œé¢ï¼ŒåŒ…å«æ‘„åƒå¤´é¢„è§ˆå’Œæ§åˆ¶æŒ‰é’®</li>
                <li><strong>ç…§ç‰‡ç®¡ç†</strong>ï¼šç‚¹å‡»åº”è¯¥å¼¹å‡ºç…§ç‰‡ç®¡ç†ç•Œé¢ï¼ŒåŒ…å«æœç´¢å’Œç»Ÿè®¡åŠŸèƒ½</li>
                <li><strong>æ¨¡æ€æ¡†äº¤äº’</strong>ï¼š
                    <ul>
                        <li>ç‚¹å‡»æ¨¡æ€æ¡†å†…å®¹åŒºåŸŸä¸åº”å…³é—­æ¨¡æ€æ¡†</li>
                        <li>ç‚¹å‡»æ¨¡æ€æ¡†èƒŒæ™¯åº”è¯¥å…³é—­æ¨¡æ€æ¡†</li>
                        <li>ç‚¹å‡»å³ä¸Šè§’Ã—æŒ‰é’®åº”è¯¥å…³é—­æ¨¡æ€æ¡†</li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>

    <!-- åŠ è½½ç®€å•æ¨¡æ€æ¡† -->
    <script src="js/simple-modal.js?v=1.0"></script>
    
    <script>
        // æ•è·æ§åˆ¶å°æ—¥å¿—
        const originalLog = console.log;
        const originalError = console.error;
        const logs = [];
        
        function captureLog(type, ...args) {
            const timestamp = new Date().toLocaleTimeString();
            const message = args.map(arg => 
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
            ).join(' ');
            
            logs.push(`[${timestamp}] [${type.toUpperCase()}] ${message}`);
            
            // æ›´æ–°çŠ¶æ€
            const statusText = document.getElementById('status-text');
            if (statusText) {
                if (type === 'error') {
                    statusText.innerHTML = `âŒ é”™è¯¯: ${message}`;
                    statusText.style.color = '#dc3545';
                } else if (message.includes('å·²æ˜¾ç¤º') || message.includes('å·²åŠ è½½å®Œæˆ')) {
                    statusText.innerHTML = `âœ… ${message}`;
                    statusText.style.color = '#28a745';
                } else {
                    statusText.innerHTML = `â„¹ï¸ ${message}`;
                    statusText.style.color = '#007bff';
                }
            }
            
            // æ›´æ–°æ§åˆ¶å°è¾“å‡ºæ˜¾ç¤º
            updateConsoleDisplay();
        }
        
        console.log = function(...args) {
            captureLog('log', ...args);
            originalLog.apply(console, args);
        };
        
        console.error = function(...args) {
            captureLog('error', ...args);
            originalError.apply(console, args);
        };
        
        function updateConsoleDisplay() {
            const output = document.getElementById('console-output');
            if (output) {
                output.innerHTML = logs.slice(-20).join('\n');
                output.scrollTop = output.scrollHeight;
            }
        }
        
        function showConsoleOutput() {
            const section = document.getElementById('console-section');
            section.style.display = section.style.display === 'none' ? 'block' : 'none';
            updateConsoleDisplay();
        }
        
        function clearConsole() {
            logs.length = 0;
            updateConsoleDisplay();
            const statusText = document.getElementById('status-text');
            statusText.innerHTML = 'ç­‰å¾…æµ‹è¯•...';
            statusText.style.color = '#6c757d';
        }
        
        // é¡µé¢åŠ è½½å®Œæˆæ—¶çš„çŠ¶æ€
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                const statusText = document.getElementById('status-text');
                if (typeof simplePhotoCheckin !== 'undefined' && typeof simplePhotoManagement !== 'undefined') {
                    statusText.innerHTML = 'âœ… ç®€å•æ¨¡æ€æ¡†å·²åŠ è½½ï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•';
                    statusText.style.color = '#28a745';
                } else {
                    statusText.innerHTML = 'âŒ ç®€å•æ¨¡æ€æ¡†åŠ è½½å¤±è´¥';
                    statusText.style.color = '#dc3545';
                }
            }, 500);
        });
        
        // ç›‘å¬é”™è¯¯
        window.addEventListener('error', function(e) {
            captureLog('error', `JavaScripté”™è¯¯: ${e.message} (${e.filename}:${e.lineno})`);
        });
        
        console.log('æµ‹è¯•é¡µé¢å·²åŠ è½½');
    </script>
</body>
</html>
