// 简化的Bootstrap JS替代实现
(function() {
    // 定义全局bootstrap对象
    window.bootstrap = {};
    
    // 模态框类实现
    class Modal {
        constructor(element) {
            this.element = typeof element === 'string' ? document.querySelector(element) : element;
            this.isShown = false;
            this.backdrop = null;
            
            // 初始化时确保模态框隐藏
            if (this.element) {
                this.element.style.display = 'none';
                this.element.classList.remove('show');
                this.element.setAttribute('aria-hidden', 'true');
                
                // 添加基础样式
                this.element.style.position = 'fixed';
                this.element.style.top = '0';
                this.element.style.left = '0';
                this.element.style.width = '100%';
                this.element.style.height = '100%';
                this.element.style.overflow = 'hidden';
                this.element.style.outline = '0';
                this.element.style.zIndex = '1050';
            }
        }
        
        show() {
            if (this.isShown || !this.element) return;
            
            // 创建背景遮罩
            this.backdrop = document.createElement('div');
            this.backdrop.className = 'modal-backdrop fade show';
            this.backdrop.style.position = 'fixed';
            this.backdrop.style.top = '0';
            this.backdrop.style.left = '0';
            this.backdrop.style.width = '100%';
            this.backdrop.style.height = '100%';
            this.backdrop.style.backgroundColor = 'rgba(0,0,0,0.5)';
            this.backdrop.style.zIndex = '1040';
            document.body.appendChild(this.backdrop);
            
            // 显示模态框
            this.element.style.display = 'block';
            this.element.classList.add('show');
            this.element.setAttribute('aria-hidden', 'false');
            document.body.classList.add('modal-open');
            
            // 添加点击背景关闭事件
            this.backdrop.addEventListener('click', () => this.hide());
            
            // 查找并添加关闭按钮事件
            const closeButtons = this.element.querySelectorAll('[data-bs-dismiss="modal"]');
            closeButtons.forEach(btn => {
                btn.addEventListener('click', () => this.hide());
            });
            
            this.isShown = true;
        }
        
        hide() {
            if (!this.isShown || !this.element) return;
            
            // 移除背景遮罩
            if (this.backdrop && this.backdrop.parentNode) {
                document.body.removeChild(this.backdrop);
                this.backdrop = null;
            }
            
            // 隐藏模态框
            this.element.style.display = 'none';
            this.element.classList.remove('show');
            this.element.setAttribute('aria-hidden', 'true');
            document.body.classList.remove('modal-open');
            
            this.isShown = false;
        }
    }
    
    // 注册Modal类
    window.bootstrap.Modal = Modal;
    
    // 页面加载完成后，确保所有模态框都隐藏
    document.addEventListener('DOMContentLoaded', function() {
        const modals = document.querySelectorAll('.modal');
        modals.forEach(modal => {
            modal.style.display = 'none';
        });
    });
})();
